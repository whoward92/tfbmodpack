focus_tree = {
	id = soviet_focus

	country = {
		factor = 0
		
		modifier = {
			add = 10
			tag = SOV
		}
	}
	
	default = no

	focus = {
		id = SOV_finish_five_year_plan
		icon = GFX_focus_generic_self_management
		x = 4
		y = 0
		cost = 6
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		bypass = {
			custom_trigger_tooltip =  {
				tooltip = construction_effort_tt
				all_owned_state = {
					free_building_slots = {
						building = industrial_complex
						size < 2
						include_locked = yes
					}
				}
			}
		}

		complete_tooltip = {
			every_state = {
				limit = { has_state_flag = SOV_finish_five_year_plan_2IC }
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
		completion_reward = {
			add_timed_idea = {
					idea = SOV_idea_2_5_year_plan
					days = 700
				}
		}
	}

	focus = {
		id = develop_leningrad_area
		icon = GFX_sov_rails
		prerequisite = { focus = SOV_finish_five_year_plan }
		relative_position_id = SOV_finish_five_year_plan
		x = -4
		y = 1
		cost = 4.5
		available = {

		}
		ai_will_do = { 
			factor = 10
		}

		completion_reward = {
			208 = {
				if = {
					limit = { is_controlled_by = ROOT }
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
					}
				}
			}
			244 = {
				if = {
					limit = { is_controlled_by = ROOT }
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
					}
				}
			}
			209 = { 
				if = {
					limit = { is_controlled_by = ROOT }
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
					}
				}
			}
			263 = { 
				if = {
					limit = { is_controlled_by = ROOT }
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
					}
				}
			}
		}		
	}

	focus = {
		id = develop_moscow_area
		icon = GFX_sov_rails
		prerequisite = { focus = SOV_finish_five_year_plan }
		relative_position_id = SOV_finish_five_year_plan
		x = -2
		y = 1
		cost = 6.5
		available = {

		}
		ai_will_do = { 
			factor = 10
		}

		completion_reward = {
			246 = {
				if = {
					limit = { is_controlled_by = ROOT }
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
					}
				}
			}
			247 = {
				if = {
					limit = { is_controlled_by = ROOT }
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
					}
				}
			}
			248 = {
				if = {
					limit = { is_controlled_by = ROOT }
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
					}
				}
			}
			253 = {
				if = {
					limit = { is_controlled_by = ROOT }
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
					}
				}
			}
			254 = {
				if = {
					limit = { is_controlled_by = ROOT }
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
					}
				}
			}
			223 = {
				if = {
					limit = { is_controlled_by = ROOT }
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
					}
				}
			}
			205 = {
				if = {
					limit = { is_controlled_by = ROOT }
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
					}
				}
			}
			242 = {
				if = {
					limit = { is_controlled_by = ROOT }
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
					}
				}
			}
		}		
	}

	focus = {
		id = sov_don_river_system
		icon = GFX_sov_don_river
		prerequisite = { focus = develop_moscow_area }
		prerequisite = { focus = develop_leningrad_area }
		relative_position_id = develop_moscow_area
		x = -1
		y = 1
		cost = 4
		available = {

		}
		ai_will_do = { 
			factor = 10
		}

		completion_reward = {
			258 = {
				if = {
					limit = { is_controlled_by = ROOT }
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
					}
				}
			}
			257 = {
				if = {
					limit = { is_controlled_by = ROOT }
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
					}
				}
			}
			260 = {
				if = {
					limit = { is_controlled_by = ROOT }
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
					}
				}
			}
		}
	}

	focus = {
		id = sov_stalingrad_area_development
		icon = GFX_stalingrad_development
		prerequisite = { focus = sov_don_river_system }
		relative_position_id = sov_don_river_system
		x = -1
		y = 1
		cost = 5
		available = {
			#NOT = { has_idea = SOV_idea_2_5_year_plan }
			#has_idea = SOV_idea_3_5_year_plan
		}
		ai_will_do = { 
			factor = 10
		}

		completion_reward = {
			245 = {
				if = {
					limit = { is_controlled_by = ROOT }
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
					}
				}
			}
			265 = {
				if = {
					limit = { is_controlled_by = ROOT }
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
					}
				}
			}
			401 = {
				if = {
					limit = { is_controlled_by = ROOT }
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
					}
				}
			}
			407 = {
				if = {
					limit = { is_controlled_by = ROOT }
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
					}
				}
			}
			236 = {
				if = {
					limit = { is_controlled_by = ROOT }
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
					}
				}
			}
			238 = {
				if = {
					limit = { is_controlled_by = ROOT }
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
					}
				}
			}
		}
	}

	focus = {
		id = sov_develop_urals
		icon = GFX_sov_rails
		prerequisite = { focus = sov_don_river_system }
		relative_position_id = sov_don_river_system
		x = 1
		y = 1
		cost = 4
		available = {
			NOT = { has_idea = SOV_idea_2_5_year_plan }
		}

		ai_will_do = { 
			factor = 10
		}

		completion_reward = {
			573 = {
				if = {
					limit = { is_controlled_by = ROOT }
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
					}
				}
			}
			251 = {
				if = {
					limit = { is_controlled_by = ROOT }
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
					}
				}
			}
			582 = {
				if = {
					limit = { is_controlled_by = ROOT }
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
					}
				}
			}
			398 = {
				if = {
					limit = { is_controlled_by = ROOT }
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
					}
				}
			}
		}
	}

	focus = {
		id = sov_retool_tractor_factories
		icon = GFX_sov_tankograd
		prerequisite = { focus = sov_stalingrad_area_development }
		relative_position_id = sov_stalingrad_area_development
		x = 0
		y = 1
		cost = 5
		available = {
			NOT = { has_idea = SOV_idea_2_5_year_plan }
		}
		ai_will_do = { 
			factor = 10
		}

		completion_reward = {
			407 = {
				if = {
					limit = { is_controlled_by = ROOT }
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
					}
				}
			}
			195 = {
				if = {
					limit = { is_controlled_by = ROOT }
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
					}
				}
			}
		}
	}

	focus = {
		id = SOV_urals_armed
		icon = GFX_sov_goal_arm_urals
		prerequisite = { focus = sov_develop_urals }
		relative_position_id = sov_develop_urals
		x = 0
		y = 1
		cost = 5
		available = {

		}
		ai_will_do = { 
			factor = 10
		}

		completion_reward = {
			652 = {
				if = {
					limit = { is_controlled_by = ROOT }
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
					}
				}
			}
			651 = {
				if = {
					limit = { is_controlled_by = ROOT }
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
					}
				}
			}
		}
	}

	focus = {
		id = SOV_t_34_finalized
		icon = GFX_sov_tankograd
		prerequisite = { focus = sov_retool_tractor_factories }
		relative_position_id = sov_retool_tractor_factories
		available = {
		date > 1939.05.01
		}

		x = 0
		y = 1
		cost = 6
		ai_will_do = {
			factor = 1
		}
		bypass = {
		        has_tech = improved_medium_tank
		}
                #REVISIT TO OPTIMIZE AI
		completion_reward = {
			set_technology = { 
				improved_medium_tank = 1
			} 
		}
	}


	focus = {
		id = SOV_petrochemical
		icon = GFX_goal_oil
		prerequisite = { focus = SOV_finish_five_year_plan }
		relative_position_id = SOV_finish_five_year_plan
		x = 1
		y = 1
		cost = 6
		available = {
		}
		ai_will_do = {
			factor = 8
		}

		completion_reward = {
			add_resource = {
				type = oil
				amount = 32
				state = 229
			}
			add_resource = {
				type = rubber
				amount = 16
				state = 229
			}
			229 = {
				if = {
					limit = { is_controlled_by = ROOT }
					add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = synthetic_refinery
					level = 1
					instant_build = yes
				}
				}
			}
            add_tech_bonus = {
				name = GER_oil_knowledge
					bonus = 0.6
					uses = 2
					category = synth_resources
			}			
		}
	}
	
	focus = {
		id = SOV_Improvement_Tools
		icon = GFX_goal_generic_air_production
		prerequisite = { focus = SOV_petrochemical }
		relative_position_id = SOV_petrochemical
		x = 0
		y = 1
		cost = 5
		available = {
			has_idea = home_of_revolution
		}
		ai_will_do = {
			factor = 8 
		}

		completion_reward = {
			swap_ideas = {
				add_idea = SOV_revolution_workers_culture
				remove_idea = home_of_revolution
			}
		}
	}

	focus = {
		id = SOV_third_five_year_plan
		icon = GFX_sov_stalin_writing
		prerequisite = { focus = SOV_Improvement_Tools }
		relative_position_id = SOV_Improvement_Tools
		x = 0
		y = 1
		cost = 6
		available = {
			NOT = { has_idea = SOV_idea_2_5_year_plan }
		}
		ai_will_do = {
			factor = 8
		}

		completion_reward = {
			add_ideas = SOV_idea_3_5_year_plan
		}
	}

	focus = {
		id = SOV_arms_industry_2
		icon = GFX_sov_arms_production
		prerequisite = { focus = SOV_third_five_year_plan }
		relative_position_id = SOV_third_five_year_plan
		x = -1
		y = 1
		cost = 10
		available = {
		}
		ai_will_do = {
			factor = 8
		}

		completion_reward = {
			random_owned_controlled_state = {
				prioritize = { 653 }
					limit = {
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
			}
			random_owned_controlled_state = {
				prioritize = { 572 }
					limit = {
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
			}
			random_owned_controlled_state = {
				prioritize = { 582 }
					limit = {
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
			}
		}
	}

	focus = {
		id = SOV_extra_tech_slot_early
		icon = GFX_focus_research
		text = extra_tech_slot
		prerequisite = { focus = SOV_third_five_year_plan }
		relative_position_id = SOV_third_five_year_plan
		x = 2
		y = 0
		relative_position_id = SOV_arms_industry_2
		cost = 10
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		completion_reward = {
			add_research_slot = 1
		}
	}

	focus = {
		id = SOV_tranformation_of_nature
		icon = GFX_goal_generic_soviet_construction
		prerequisite = { focus = SOV_extra_tech_slot_early }
		x = 0
		y = 1
		relative_position_id = SOV_extra_tech_slot_early
		cost = 10
		ai_will_do = {
			factor = 5
		}

		available = {
			controls_state = 404
		}

		completion_reward = {
			add_political_power = 120
			add_resource = {
				type = rubber
				amount = 6
				state = 404
			}
		}
	}

	focus = {
		id = SOV_stalin_constitution
		icon = GFX_Goal_Stalin
		x = 10
		y = 0
		cost = 10
		ai_will_do = {
			factor = 1
		}

		available_if_capitulated = yes

		completion_reward = {
			add_political_power = 150
			
		}
	}

	focus = {
		id = SOV_new_generation
		icon = GFX_sov_stakhonovite
		prerequisite = { focus = SOV_stalin_constitution }
		relative_position_id = SOV_stalin_constitution
		x = -2
		y = 1
		cost = 5
		available = {
		}
		ai_will_do = {
			factor = 8 
		}

		completion_reward = {
			add_ideas = SOV_idea_new_soviet_generation

			add_popularity = {
				ideology = communism
				popularity = 0.07
			}

			add_stability = 0.05

			#add_tech_bonus = {
			#	name = construction_tech_bonus
			#	bonus = 0.5
			#	uses = 3
			#	category = construction_tech
			#}
		}
	}	

	focus = {
		id = SOV_workers_culture
		icon = GFX_goal_generic_construction
		prerequisite = { focus = SOV_new_generation }
		x = 1
		y = 1
		relative_position_id = SOV_new_generation
		cost = 10
		ai_will_do = {
			factor = 1
		}

		available_if_capitulated = yes

		completion_reward = {
			add_ideas = workers_culture
		}
	}	

	focus = {
		id = SOV_progress_cult
		icon = GFX_Goal_Progress_Cult
		prerequisite = { focus = SOV_new_generation }
		x = -1
		y = 1
		relative_position_id = SOV_new_generation
		cost = 10
		ai_will_do = {
			factor = 1
		}

		available_if_capitulated = yes

		completion_reward = {
			add_ideas = progress_cult_focus
		}
	}

	focus = {
		id = SOV_socialist_science
		icon = GFX_Goal_Socialist_Science
		prerequisite = { focus = SOV_progress_cult }
		x = 1
		y = 1
		relative_position_id = SOV_progress_cult
		cost = 10
		ai_will_do = {
			factor = 1
		}

		available_if_capitulated = yes

		completion_reward = {
			add_ideas = socialist_science_focus
		}
	}

	focus = {
		id = SOV_extra_tech_slot
		icon = GFX_focus_research
		text = extra_tech_slot
		prerequisite = { focus = SOV_socialist_science }
		x = 0
		y = 1
		relative_position_id = SOV_socialist_science
		cost = 10
		ai_will_do = {
			factor = 1
		}

		available_if_capitulated = yes

		completion_reward = {
			add_research_slot = 1
		}
	}

	focus = {
		id = SOV_improve_stalin_line
		icon = GFX_Goal_Soviet_Defense
		prerequisite = { focus = SOV_anti_fascist_diplomacy }
		relative_position_id = SOV_anti_fascist_diplomacy
		available = { 
			has_offensive_war = no 
			date > 1940.05.01
		}
		x = -2
		y = 1
		cost = 8
		ai_will_do = {
			factor = 1
		}	
		completion_reward = {
			209 = {
				if = {
					limit = { is_controlled_by = ROOT }
					add_building_construction = {
						type = bunker
						level = 3
						province = 415
						instant_build = yes
					}
				}
				#add_building_construction = {
				#	type = bunker
				#	level = 6
				#	province = 209
				#	instant_build = yes
				#}
			}
			210 = {
				if = {
					limit = { is_controlled_by = ROOT }
					add_building_construction = {
						type = bunker
						level = 4
						province = 3333
						instant_build = yes
					}
				}
			}
			207 = {
				if = {
					limit = { is_controlled_by = ROOT }
					add_building_construction = {
						type = bunker
						level = 4
						province = 3219
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 4
						province = 6371
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 4
						province = 6220
						instant_build = yes
					}
				}
			}
			206 = {
				if = {
					limit = { is_controlled_by = ROOT }
					add_building_construction = {
						type = bunker
						level = 4
						province = 11370
						instant_build = yes
					}
				}
			}
			202 = {
				if = {
					limit = { is_controlled_by = ROOT }
					add_building_construction = {
						type = bunker
						level = 4
						province = 525
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 4
						province = 3494
						instant_build = yes
					}
				}

			}
			203 = {
				if = {
					limit = { is_controlled_by = ROOT }
					add_building_construction = {
						type = bunker
						level = 4
						province = 11409
						instant_build = yes
					}
				}
			}
			192 = {
				if = {
					limit = { is_controlled_by = ROOT }
					add_building_construction = {
						type = bunker
						level = 4
						province = 754
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 4
						province = 741
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 4
						province = 11670
						instant_build = yes
					}
				}
			}
		}
	}

	focus = {
		id = SOV_defense_of_moscow
		icon = GFX_goal_generic_fortify_city
		prerequisite = { focus = SOV_improve_stalin_line }
		relative_position_id = SOV_improve_stalin_line
		available = {
			#any_owned_state = {
			#	any_neighbor_state = { state = 219 } # Moscow
			#	NOT = { is_controlled_by = ROOT }
			#}
			219 = {
				is_controlled_by = ROOT
				
				OR = {
					any_neighbor_state = {
						NOT = { is_controlled_by = ROOT }
					}

					SOV = { surrender_progress > 0.1 }
				}
			}
		}
		x = 0
		y = 1
		cost = 9
		ai_will_do = {
			factor = 100
		}	
		completion_reward = {
			army_experience = 25
			219 = {
				custom_effect_tooltip = SOV_defense_of_moscow_forts
				hidden_effect = {
					add_building_construction = {
						type = bunker
						level = 3
						province = 3391
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 6414
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 9348
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 301
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 9378
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 6283
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 3259
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 11282
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 4
						province = 6348
						instant_build = yes
					}
				}
			}
		}
	}

		focus = {
		id = SOV_wartime_propaganda
		icon = GFX_focus_generic_soviet_politics
		prerequisite = { focus = SOV_defense_of_moscow }
		relative_position_id = SOV_defense_of_moscow
		x = -1
		y = 1
		cost = 10
		ai_will_do = {
			factor = 1
		}
		available = {
			has_war_with = GER		
		}		
		
		completion_reward = {
        add_ideas = wartime_propaganda
		}
	}

	focus = {
		id = SOV_move_industry_to_urals
		icon = GFX_goal_generic_construct_civilian
		x = 1
		y = 1
		relative_position_id = SOV_defense_of_moscow
		prerequisite = { focus = SOV_defense_of_moscow } 
		
		cost = 4.3
		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				NOT = { has_war_with = GER }
			}
		}

		available = {
			OR = {
				has_war_with = GER
				ENG = { surrender_progress > 0.15 }
				USA = { surrender_progress > 0.15 }			
			}
			219 = {
				is_owned_and_controlled_by = SOV
				industrial_complex > 1
			}
			195 = {
				is_owned_and_controlled_by = SOV
				industrial_complex > 0
			}
			573 = {
				is_owned_and_controlled_by = SOV
			}
			582 = {
				is_owned_and_controlled_by = SOV
			}
		}
		 cancel_if_invalid = no
		continue_if_invalid = yes
		completion_reward = {
			add_ideas = tot_economic_mobilisation 
			add_ideas = SOV_industrial_relocations
			
		}	
	}

	focus = {
		id = SOV_industrial_war_mobilisation 
		icon = GFX_goal_generic_soviet_construction
		prerequisite = { focus = SOV_move_industry_to_urals }
		prerequisite = { focus = SOV_wartime_propaganda }
		relative_position_id = SOV_defense_of_moscow
		x = 0
		y = 2
		cost = 5
		available = {
			OR = {
			has_war_with = GER
			has_war_with = JAP
			}
		}
		completion_reward = {
			if = { 
				limit = {
				 NOT = { has_idea = peoples_commissariat_focus }
				 }
				 add_ideas = emergency_industrial_effort 
			}
			if = {
				limit = {
					has_idea = peoples_commissariat_focus
					}
					swap_ideas = { 
					remove_idea = peoples_commissariat_focus
					add_idea = emergency_industrial_effort
					}
			} 
			random_owned_controlled_state = {
				prioritize = { 587 }
					limit = {
					}
					add_extra_state_shared_building_slots = 3
					add_building_construction = {
						type = arms_factory
						level = 3
						instant_build = yes
					}
			}
			random_owned_controlled_state = {
				prioritize = { 406 }
					limit = {
					}
					add_extra_state_shared_building_slots = 3
					add_building_construction = {
						type = arms_factory
						level = 3
						instant_build = yes
					}
			}
		}
	}

	focus = {
		id = SOV_anti_fascist_diplomacy
		icon = GFX_Goal_Anti_fascist_dimplomacy
		prerequisite = { focus = SOV_stalin_constitution }
		relative_position_id = SOV_stalin_constitution
		x = 3
		y = 1
		cost = 5
		ai_will_do = {
			factor = 1
			modifier = {
				has_government = fascism
				factor = 0
			}
		}	
		available_if_capitulated = yes
		completion_reward = {
			USA = { 
				if = {
					limit = { NOT = { has_government = fascism } }
					add_opinion_modifier = { target = SOV modifier = anti_fascist_diplomacy_focus } 
				}
			}
			ENG = { 
				if = {
					limit = { NOT = { has_government = fascism } }

					add_opinion_modifier = { target = SOV modifier = anti_fascist_diplomacy_focus } 
				}
			}
			FRA = { 
				if = {
					limit = { NOT = { has_government = fascism } }
					add_opinion_modifier = { target = SOV modifier = anti_fascist_diplomacy_focus } 
				}
			}
			every_other_country = {
				limit = { has_government = fascism }
				add_opinion_modifier = { target = SOV modifier = anti_fascist_diplomacy_fascists }
			}
		}
	}

	focus = {
		id = SOV_far_east_fortification
		icon = GFX_Goal_Soviet_Defense2
		prerequisite = { focus = SOV_anti_fascist_diplomacy }
		relative_position_id = SOV_anti_fascist_diplomacy
		x = 0
		y = 1
		cost = 4
		ai_will_do = {
			factor = 1
		}	
		completion_reward = {
			563 = {
				if = {
					limit = { is_controlled_by = ROOT }
					custom_effect_tooltip = SOV_far_east_fortification_forts_1
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 2
							province = 4719
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 2
							province = 12622
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 2
							province = 10559
							instant_build = yes
						}
					}
				}
			}
			657 = {
					if = {
					limit = { is_controlled_by = ROOT }
					custom_effect_tooltip = SOV_far_east_fortification_forts_2
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 2
							province = 7763
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 2
							province = 4725
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 2
							province = 10655
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 2
							province = 7801
							instant_build = yes
						}
					}
				}
			}
			409 = {
				if = {
					limit = { is_controlled_by = ROOT }
					custom_effect_tooltip = SOV_far_east_fortification_forts_3
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 2
							province = 12189
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 2
							province = 10466
							instant_build = yes
						}
					}
				}
			}
			408 = {
				if = {
					limit = { is_controlled_by = ROOT }
				add_building_construction = {
					type = bunker
					level = 2
					province = 11643
					instant_build = yes
					}
				}
			}
			# Other possible Provinces
			# 4719 12802 10559 12543 7851 10678 12657 7763 4725 10655 7801 10722 7672 4805
			# 12189 10466 11643 6686 664 6684 3787 6838 3977 11879 1755
		}
	}

	focus = { 
		id = SOV_support_china
		icon = GFX_focus_chi_cooperation_with_the_nationalists
		prerequisite = { focus = SOV_far_east_fortification }
		relative_position_id = SOV_far_east_fortification
		x = 0
		y = 1
		cost = 3
		ai_will_do = {
			factor = 1 
		}
		bypass = {
			CHI = {
				OR = {
					exists = no
					is_puppet = yes
				}

			}
		}
		
		available = { 
			CHI = { has_war_with = JAP }
			CHI = { has_tech = infantry_weapons1 }
			CHI = { has_completed_focus = CHI_ask_for_support_from_the_soviet_union }
			has_equipment = { infantry_equipment > 2999 }
			has_equipment = { infantry_uniforms > 1499 }
		}
		
		completion_reward = {
			army_experience = 20
			add_political_power = 50 
			ROOT = {
				send_equipment = {
					target = CHI
					type = infantry_equipment
					amount = 3000
					old_prioritised = yes
				}
				send_equipment = {
					target = FROM
					type = infantry_uniforms
					amount = 1500
					old_prioritised = yes
				}
			}
			CHI = { 
				add_opinion_modifier = { target = SOV modifier = SOV_CHI_help }
			}
		}
	}

	focus = {
		id = SOV_support_spain
		icon = GFX_goal_LEC_armsSPA
		prerequisite = { focus = SOV_anti_fascist_diplomacy }
		relative_position_id = SOV_anti_fascist_diplomacy
		x = 2
		y = 1
		cost = 2
		ai_will_do = {
			factor = 50 
		}
		available = {
		SPR = { has_civil_war = yes }
		
		}
		completion_reward = {
			add_timed_idea = {
					idea = Spainish_gold
					days = 200
				}
			if = {
				limit = {
					SPR = {
						has_tech = infantry_weapons1
					}
				}
				SPR = {
				add_equipment_to_stockpile = { type = infantry_equipment_1 amount = 2000 producer = SOV }
				add_equipment_to_stockpile = { type = support_equipment_1 amount = 1000 producer = SOV }
				}
			} 
			if = {
				limit = {
					SPR = {
						has_tech = artillery1
					}
				}
				SPR = {
				add_equipment_to_stockpile = { type = artillery_equipment_1 amount = 500 producer = SOV }
				}
			}
			SPR = { 
				add_opinion_modifier = { target = SOV modifier = SOV_SPR_help }
			}
		}
	}

	focus = {
		id = SOV_socialist_realism
		icon = GFX_goal_generic_forceful_treaty
		prerequisite = { focus = SOV_stalin_constitution }
		x = 5
		y = 1
		relative_position_id = SOV_stalin_constitution
		cost = 10
		ai_will_do = {
			factor = 1
		}

		available_if_capitulated = yes

		completion_reward = {
			add_political_power = 120
		}
	}

	focus = {
		id = SOV_Red_Army_Airforce
		prerequisite = { focus = SOV_great_purge }
		relative_position_id = SOV_great_purge
		icon = GFX_Aerial_Fleet
		cost = 6.5
		x = 4
		y = 1
		allow_branch = {
			NOT = {
				has_civil_war = yes
			}
		}
	
		completion_reward = {
			add_tech_bonus = {
				uses = 2
				bonus = 0.50
				category = air_doctrine
			}
		}
	}	

	focus = {
		id = SOV_women_pilots
		icon = GFX_goal_generic_CAS
		prerequisite = { focus = SOV_Red_Army_Airforce }
		x = 0
		y = 1
		relative_position_id = SOV_Red_Army_Airforce
		cost = 10
		ai_will_do = {
			factor = 1
		}

		available_if_capitulated = yes

		completion_reward = {
			air_experience = 25
			set_rule = {
				can_generate_female_aces = yes
			}
			if = {
				limit = {
					SOV = { has_full_control_of_state = 219 }
				}
				custom_effect_tooltip = SOV_night_witches_tt
				hidden_effect = {
					load_oob = "SOV_night_witches"
				}
			}
		}
	}

	focus = {
		id = SOV_great_purge
		icon = GFX_goal_generic_war_with_comintern
		available = {
			NOT = { has_country_flag = counter_purge }
			has_government = communism
		}
		x = 24
		y = 0
		cost = 1
		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				any_claim = yes
				has_war = yes
			}
		}

		bypass = {
			custom_trigger_tooltip = {
				tooltip = SOV_great_purge_bypass_tt
				has_country_flag = counter_purge
			}
		}

		select_effect = {
			country_event = { id = soviet.24 days = 1 }
			set_country_flag = SOV_purge_started
		}
		completion_reward = {
			#custom_effect_tooltip = SOV_great_purge_tt
			
			add_timed_idea = {
				idea = officers_purged
				days = 1460
			}
		}
	}

	focus = {
		id = SOV_collectivist_propaganda
		icon = GFX_Goal_Commie_recruits
		prerequisite = { focus = SOV_great_purge }
		x = -5
		y = 1
		relative_position_id = SOV_great_purge
		cost = 10
		ai_will_do = {
			factor = 0.25
		}

		available_if_capitulated = yes

		completion_reward = {
		remove_unit_leader = 402
			add_political_power = 120
			add_ideas = SOV_collectivist_propaganda
		}
	}

	focus = {
		id = SOV_positive_heroism
		icon = GFX_goal_generic_cavalry
		prerequisite = { focus = SOV_collectivist_propaganda }
		x = -1
		y = 1
		relative_position_id = SOV_collectivist_propaganda
		cost = 10
		ai_will_do = {
			factor = 1
		}

		available_if_capitulated = yes

		completion_reward = {
			custom_effect_tooltip = available_military_high_command
			show_ideas_tooltip = konstantin_rokossovsky 
			custom_effect_tooltip = available_theorist
			show_ideas_tooltip = georgy_zhukov
			# REVISIT Might want to add more
		}
	}

	focus = {
		id = SOV_polish_army
		icon = GFX_polish_army
		prerequisite = { focus = SOV_positive_heroism  }
		relative_position_id = SOV_positive_heroism
		x = 0
		y = 1
		cost = 5
		available = {
			has_war_with = GER
			GER = {controls_state = 10}
			date > 1942.01.01
			
		}
		ai_will_do = {
			factor = 5
		}

		completion_reward = {
			country_event = {id = soviet.336 }
		}
	}

	focus = {
		id = SOV_nkvd_primacy
		icon = GFX_goal_generic_military_deal
		prerequisite = { focus = SOV_collectivist_propaganda }
		x = 1
		y = 1
		relative_position_id = SOV_collectivist_propaganda
		cost = 10
		ai_will_do = {
			factor = 10
			modifier = {
				factor = 1000
				any_claim = yes
				has_war = yes
			}
		}	
		
		available_if_capitulated = yes

		completion_reward = {
			add_ideas = nkvd
		}
	}

	focus = {
		id = SOV_STAVKA
		icon = GFX_goal_generic_allies_build_infantry
		prerequisite = { focus = SOV_great_purge }
		relative_position_id = SOV_great_purge
		x = 1
		y = 1
		cost = 7
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 1000
				any_claim = yes
				has_war = yes
			}
		}	
		available_if_capitulated = yes

		completion_reward = {
			add_ideas = SOV_STAVKA
		}
	}	

	focus = {
		id = SOV_nkvd_divisions
		icon = GFX_goal_generic_allies_build_infantry
		prerequisite = { focus = SOV_nkvd_primacy }
		x = 0
		y = 1
		relative_position_id = SOV_nkvd_primacy
		cost = 10
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 1000
				any_claim = yes
				has_war = yes
			}
		}

		available_if_capitulated = yes

		completion_reward = {
			custom_effect_tooltip = SOV_nkvd_upgrade_tooltip

			swap_ideas = {
				remove_idea = nkvd
				add_idea = nkvd_2
			}
		}
	}

	focus = {
		id = SOV_lessons_of_war
		icon = GFX_goal_generic_military_sphere
		prerequisite = { focus = SOV_great_purge }
		available = {
				date > 1941.1.1
		}
		x = -1
		y = 1
		relative_position_id = SOV_great_purge
		cost = 10
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 1000
				any_claim = yes
				has_war = yes
			}
		}

		available_if_capitulated = yes

		completion_reward = {
			army_experience = 20
			add_tech_bonus = {
				name = armor_bonus
				bonus = 1
				uses = 1
				category = armor
			}
			add_tech_bonus = {
				name = armor_bonus
				bonus = 1
				category = land_doctrine
			}
			custom_effect_tooltip = SOV_lessons_of_war_tt
			swap_ideas = { 
				remove_idea = officers_purged
				add_idea = officers_purged_2
			}			
		}
	}

	focus = {
		id = SOV_military_reorganization
		icon = GFX_goal_generic_army_doctrines
		prerequisite = { focus = SOV_lessons_of_war}
		x = 0
		y = 1
		relative_position_id = SOV_lessons_of_war
		cost = 10
		ai_will_do = {
			factor = 0.25
			modifier = {
				factor = 1000
				any_claim = yes
				has_war = yes
			}
		}

		available_if_capitulated = yes

		completion_reward = {
			add_tech_bonus = {
				bonus = 1
				uses = 1
				category = land_doctrine
			}
			army_experience = 20
			custom_effect_tooltip = SOV_military_reorg_tt

			swap_ideas = { 
				remove_idea = officers_purged_2
				add_idea = officers_purged_3
			}		
		}
	}

	focus = {
		id = SOV_restructured_government
		icon = GFX_goal_support_communism
		prerequisite = { focus = SOV_military_reorganization }
		x = 1
		y = 1
		relative_position_id = SOV_military_reorganization
		cost = 10
		ai_will_do = {
			factor = 1
		}

		available_if_capitulated = yes

		completion_reward = { 
			add_ideas = SOV_restructured_government
		}
	}	

	focus = {
		id = SOV_closed_city_network
		icon = GFX_focus_research
		prerequisite = { focus = SOV_restructured_government }
		#available = {
		#	has_global_flag = sov_yes_pact
		#}
		x = 0
		y = 1
		relative_position_id = SOV_restructured_government
		cost = 10
		ai_will_do = {
			factor = 1
		}

		available_if_capitulated = yes

		completion_reward = {
			add_research_slot = 1
		}
	}

	focus = {
		id = SOV_rehabilitated_military
		icon = GFX_goal_generic_small_arms
		prerequisite = { focus = SOV_military_reorganization }
		relative_position_id = SOV_military_reorganization
		x = -1
		y = 1
		cost = 10
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 100
				any_claim = yes
				has_war = yes
			}
		}

		available_if_capitulated = yes

		completion_reward = {
			add_ideas = rehabilitated_military_focus
			custom_effect_tooltip = SOV_rehab_military_tt
			swap_ideas = { 
				remove_idea = officers_purged_3
				add_idea = officers_purged_4
			}	
		}
	}

	focus = {
		id = SOV_militarized_schools
		icon = GFX_goal_generic_army_doctrines
		prerequisite = { focus = SOV_rehabilitated_military }
		x = 0
		y = 1
		relative_position_id = SOV_rehabilitated_military
		cost = 10
		ai_will_do = {
			factor = 1
		}

		available_if_capitulated = yes

		completion_reward = {
			add_ideas = militarized_schools
			custom_effect_tooltip = SOV_mil_schools_tt
			swap_ideas = { 
				remove_idea = officers_purged_4
				add_idea = officers_purged_5
			}

		}
	}

	focus = {
		id = SOV_return_of_the_heroes
		icon = GFX_focus_ger_great_red_menace
		
		available = {
			has_war_with = GER 
		}
		
		relative_position_id = SOV_militarized_schools
		prerequisite = { focus = SOV_militarized_schools }
		x = 0
		y = 1
		cost = 13
	
		completion_reward = {
			create_corps_commander = {
				name = "Konstantin Rokossovsky"
				id = 402
					picture = "Portrait_Soviet_Konstantin_Rokossovsky.dds"
				traits = { armor_officer panzer_leader trickster trait_cautious brilliant_strategist trait_engineer ranger }
				skill = 5
				
				attack_skill = 4
				defense_skill = 5
				planning_skill = 4
				logistics_skill = 3
			}
					
			create_corps_commander = {
				name = "Aleksandr Vasilevsky"
				id = 407
					picture = "Portrait_Soviet_Aleksandr_Vasilevsky.dds"
				traits = { armor_officer politically_connected trait_cautious harsh_leader skilled_staffer panzer_leader organizer }
				skill = 4

				
				attack_skill = 4
				defense_skill = 4
				planning_skill = 3
				logistics_skill = 2
			}
			custom_effect_tooltip = SOV_return_heros_tt
			swap_ideas = { 
				remove_idea = officers_purged_5
				add_idea = officers_purged_6
			}
		}
	}

	

	### END BRANCH ###

	
}