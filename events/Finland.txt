 ###########################
# Finland Events
###########################

add_namespace = finland

# Soviet Ultimatum
country_event = {
	id = finland.1
	title = finland.1.t
	desc = finland.1.d
	picture = GFX_report_event_soviet_tanks_snow
	
	is_triggered_only = yes
	
	option = { # Refuse
		name = finland.1.b
		ai_chance = { factor = 75 }
		SOV = {
			country_event = { days = 5 id = soviet.13 }
			effect_tooltip = {
				create_wargoal = {
					type = take_state
					target = FIN
					generator = { 146 }
				}
			}
		}
	}
}

# Request Swedish Assistance?
country_event = {
	id = finland.2
	title = finland.2.t
	desc = finland.2.d
	picture = GFX_report_event_soviet_finnish_pact
	
	fire_only_once = yes

	trigger = {
		tag = FIN
		has_war_with = SOV
		SWE = {
			NOT = { has_war_with = FIN }
			NOT = { is_in_faction_with = SOV }
			exists = yes
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	option = {
		name = finland.2.a
		SWE = {
			country_event = { id = finland.3 }
		}
	}

	option = {
		name = finland.2.b
	}
}

# Swedish Support in Winter War
country_event = {
	id = finland.3
	title = finland.3.t
	desc = finland.3.d
	picture = GFX_report_event_finnish_letter
	
	is_triggered_only = yes

	option = {
		#Refuse to help the Finns
		name = finland.3.a

		ai_chance = {
			factor = 10 
			modifier = {
				factor = 10
				OR = {
					has_war = yes
					has_government = communism
				}
			}
		}

		FIN = {
			country_event = { id = finland.4 days = 3 }
			add_opinion_modifier = {
				target = ROOT
				modifier = refused_help
			}
		}
	}

	option = {
		#Help the Finns
		name = finland.3.b

		ai_chance = {
			factor = 25
			modifier = {
				factor = 5							
				has_government = democratic
				FIN = {
				 has_government = democratic
				}
			}
		}
		FIN = {
			country_event = { id = finland.5 days = 3 }
		}
	}

}

country_event = {
	#Sweden refuses help
	id = finland.4
	title = finland.4.t
	desc = finland.4.d
	picture = GFX_report_event_finnish_soldiers_snow
	
	is_triggered_only = yes

	option = {
		name = finland.4.a
	}
}

country_event = {
	#Sweden helps out
	id = finland.5
	title = finland.5.t
	desc = finland.5.d
	picture = GFX_report_event_swedish_soldier
	
	is_triggered_only = yes

	option = {
		name = finland.5.a
		###Newest (until 1940) Swedish fighters
		if = {
			limit = {
				SWE = {
					has_tech = fighter2
				}
			}
			add_equipment_to_stockpile = {
				type = fighter_equipment_2
				amount = 25
				producer = SWE
			}
		}
		else_if = {
			limit = {
				SWE = {
					has_tech = fighter1
				}
			}
			add_equipment_to_stockpile = {
				type = fighter_equipment_1
				amount = 25
				producer = SWE
			}
		}
		else = {
			add_equipment_to_stockpile = {
				type = fighter_equipment_0
				amount = 25
				producer = SWE
			}
		}
		#Swedish volunteers
		division_template = {
            name = "Swedish Volunteers"
            priority = 2
            is_locked = yes
            division_names_group = FIN_SWE_01
            regiments = {
                infantry = { x = 0 y = 0 }
                infantry = { x = 0 y = 1 }
                infantry = { x = 0 y = 2 }
                infantry = { x = 0 y = 3 }
                infantry = { x = 0 y = 4 }
                infantry = { x = 1 y = 0 }
                infantry = { x = 1 y = 1 }
                infantry = { x = 1 y = 2 }
                infantry = { x = 1 y = 3 }
                infantry = { x = 1 y = 4 }
            }
            support = {
                artillery = { x = 0 y = 0 }
                anti_tank = { x = 0 y = 1 } 
                signal_company = { x = 0 y = 2 } 
            }
        }


		random_owned_controlled_state = {
			prioritize = { 111 }
			create_unit = {
				division = "name = \"Stridsgruppen\" division_template = \"Swedish Volunteers\" start_experience_factor = 1.0"
				owner = FIN
			}
			
		}
	}
}

country_event = {
	id = finland.6
	title = finland.6.t
	desc = finland.6.d
	picture = GFX_report_event_swedish_soldier
	
	is_triggered_only = yes

	option = {
		name = finland.6.a
	}
}

#Surrender when Soviet has taken too much land
country_event = {
	id = finland.7
	title = finland.7.t
	desc = finland.7.d
	picture = GFX_report_event_soviet_tanks_snow
	
	trigger = {
		tag = FIN
		has_war_with = SOV
		surrender_progress > 0.25
	}

	mean_time_to_happen = { days = 5 }

	fire_only_once = yes
	
	# FIGHT ON
	option = {
		name = finland.fighton
		ai_chance = {
			base = 0
		}
	}
	
	#Surrender and offer territory
	option = {
		name = finland.7.a
		SOV = {
			country_event = { id = finland.spot8 }
		}
		ai_chance = {
			base = 8
		}
	}
}

#Soviet response to Finnish surrender

country_event = {
	id = finland.spot8
	title = finland.spot8.t
	desc = finland.spot8.d
	picture = GFX_report_event_finnish_soldiers_snow
	
	is_triggered_only = yes
	
	option = {
		name = finland.spot8.sovietcontinues
		ai_chance = {
			base = 20
		}
	}
	#Accept surrender
	option = {
		name = finland.spot8.a
		ai_chance = {
			base = 9
		}
		white_peace = FIN
		SOV = {
		transfer_state = 146
		transfer_state = 147
		}
	}
}


#Soviet says no!
country_event = {
	id = finland.9
	title = finland.9.t
	desc = finland.9.d
	picture = GFX_report_event_finnish_soldiers_snow
	
	is_triggered_only = yes

	option = {
		name = finland.9.a
	}
}
# Election of 1937
country_event = {
	id = finland.10
	title = finland.10.t
	desc = finland.10.d
	picture = GFX_report_event_finnish_letter

	fire_only_once = yes

	trigger = {
		tag = FIN
		has_government = neutrality
		date > 1937.2.25
		has_country_leader = {
			name = "Pehr Evind Svinhufvud"
			ruling_only = yes
		}
	}	

	mean_time_to_happen = {
		days = 5
	}
	

	option = {
		name = finland.10.a
		kill_country_leader = yes
		create_country_leader = {
			name = "Kyösti Kallio"
			desc = "POLITICS_KYÖSTI_KALLIO_DESC"
			picture = "gfx/leaders/FIN/Portrait_Finland_Kyosti_Kallio.dds"
			expire = "1940.12.19"
			ideology = centrism
			traits = {
				anti_communist stout_defender
			}
		}
	}
}

# Kyosti dies
country_event = {
	id = finland.11
	title = finland.11.t
	desc = finland.11.d
	picture = GFX_report_event_finnish_letter

	fire_only_once = yes

	trigger = {
		tag = FIN
		has_government = neutrality
		date > 1940.12.18
		has_country_leader = {
			name = "Kyösti Kallio"
			ruling_only = yes
		}
	}	

	mean_time_to_happen = {
		days = 1
	}
	

	option = {
		name = finland.11.a
		kill_country_leader = yes
		create_country_leader = {
			name = "Risto Ryti"
			desc = "POLITICS_RISTO_HEIKKI_RYT_DESC"
			picture = "Portrait_Finland_Risto_Heikki_Ryti.dds"
			expire = "1944.8.4"
			ideology = centrism
			traits = { likes_germany financial_expert }
		}
	}
}

# Resignation of Risto Ryti
country_event = {
	id = finland.12
	title = finland.12.t
	desc = finland.12.d
	picture = GFX_report_event_finnish_letter

	fire_only_once = yes

	trigger = {
		tag = FIN
		has_government = neutrality
		has_war_with = SOV
		surrender_progress > 0.25
		has_country_leader = {
			name = "Risto Ryti"
			ruling_only = yes
		}
	}	

	mean_time_to_happen = {
		days = 1
	}
	

	option = {
		name = finland.12.a
		kill_country_leader = yes
		create_country_leader = {
			name = "Carl Gustaf Emil Mannerheim"
			picture = "portrait_fin_carl_mannerheim.dds"
			expire = "1946.3.11"
			ideology = centrism
			traits = {}
		}
		hidden_effect = {
			country_event = { days = 1 id = finland.15 }
		}
	}
}
# Resignation of Mannerheim
country_event = {
	id = finland.13
	title = finland.13.t
	desc = finland.13.d
	picture = GFX_report_event_finnish_letter

	fire_only_once = yes

	trigger = {
		tag = FIN
		has_government = neutrality
		date > 1944.8.3
		has_country_leader = {
			name = "Carl Gustaf Emil Mannerheim"
			ruling_only = yes
		}
	}	

	mean_time_to_happen = {
		days = 1
	}
	

	option = {
		name = finland.13.a
		kill_country_leader = yes
		create_country_leader = {
			name = "Juho Kusti Paasikivi"
			picture = "gfx/leaders/Europe/Portrait_Europe_Generic_land_5.dds"
			expire = "1965.1.1"
			ideology = centrism
			traits = {}
		}
	}
}
#Removal of Ghost of Civil War
country_event = {
	id = finland.14
	title = finland.14.t
	desc = finland.14.d
	picture = GFX_report_event_soviet_tanks
	fire_only_once = yes
	trigger = {
		tag = FIN
		has_war = yes
		has_idea = FIN_ghost_civil_war
	}
	mean_time_to_happen = {
		days = 1
	}
	option = {
		name = finland.14.a
		swap_ideas = {
			remove_idea = FIN_ghost_civil_war
			add_idea = FIN_spirit_of_winter_war
		}
	}
}
#Finland Changes sides - Moscow Armistice
country_event = {
	id = finland.15
	title = finland.15.t
	desc = finland.15.d
	picture = GFX_report_event_soviet_tanks
	fire_only_once = yes
	is_triggered_only = yes

	option = {
		#Fight on alongside Germany
		name = finland.15.a 
		ai_chance = { factor = 0 }
	}
	option = {
		#Make peace with Soviets
		name = finland.15.b
		ai_chance = { factor = 100 }
		SOV = {
			country_event = { days = 1 id = soviet.63 }
		}
	}
}
country_event = {
	#Soviets agree to terms - Moscow Armistice 
	id = finland.16
	title = finland.16.t
	desc = finland.16.d
	picture = GFX_report_event_soviet_tanks
	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = finland.16.a
		white_peace = SOV
		country_event = { days = 7 id = finland.18 }
	}
}
country_event = {
	#Soviets declines - Moscow Armistice
	id = finland.17
	title = finland.17.t
	desc = finland.17.d
	picture = GFX_report_event_soviet_tanks
	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = finland.17.a
	}
}
country_event = {
	#declare war on Germany - Lapland war
	id = finland.18
	title = finland.18.t
	desc = finland.18.d
	picture = GFX_report_event_soviet_tanks
	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = finland.18.a
		ENG = {
			add_to_faction = FIN
		}
	}
}